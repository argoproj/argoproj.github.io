webpackJsonp([0x726754cc3c02],{601:function(e,n){e.exports={pathContext:{docHtml:'<h1>Sensor</h1>\n<p>Sensors define a set of event dependencies (inputs) and triggers (outputs). </p>\n<ol>\n<li><a href="sensor-protocol.html">Specifications</a></li>\n<li><a href="#terminology">Terminology</a></li>\n<li><a href="#how-it-works">How it works?</a></li>\n<li><a href="#how-to-pass-an-event-payload-to-a-trigger">How to pass an event payload to a trigger?</a></li>\n<li><a href="#examples">Examples</a></li>\n</ol>\n<br/>\n<p align="center">\n  <img src="https://github.com/argoproj/argo-events/blob/master/docs/assets/sensor.png?raw=true" alt="Sensor">\n</p>\n<br/>\n<h2>Terminology</h2>\n<ul>\n<li>\n<h3>What is an event dependency?</h3>\n<p>A dependency is an event the sensor is waiting to happen. It is defined as "gateway-name:event-source-name".</p>\n</li>\n<li>\n<h3>What is a dependency group?</h3>\n<p>A dependency group is basically a group of event dependencies.</p>\n</li>\n<li>\n<h3>What is a circuit?</h3>\n<p>Circuit is any arbitrary boolean logic that can be applied on dependency groups.</p>\n</li>\n<li>\n<h3>What is a trigger?</h3>\n<p>Refer <a href="trigger-guide.html">Triggers</a>.</p>\n</li>\n</ul>\n<h2>How it works?</h2>\n<ol>\n<li>\n<p>Once the sensor receives an event from gateway either over HTTP or through NATS, it validates\nthe event against dependencies defined in sensor spec. If the event is expected, then it is marked as a valid\nevent and the dependency is marked as resolved.</p>\n</li>\n<li>\n<p>If you haven\'t defined dependency groups, sensor basically waits for all dependencies to resolve\nand then kicks off triggers in sequence. If filters are defined, sensor applies the filter on target event\nand if events pass the filters, triggers are fired.</p>\n</li>\n<li>\n<p>If you have defined dependency groups, sensor upon receiving an event evaluates the group to which the event belongs to\nand marks the group as resolved if all other event dependencies in the group are already resolved.</p>\n</li>\n<li>\n<p>Whenever a dependency group is resolved, sensor evaluates the <code>circuit</code> defined in spec. If the <code>circuit</code> resolves to true, the\ntriggers are fired. Sensor always waits for <code>circuit</code> to resolve to true before firing triggers.</p>\n</li>\n<li>\n<p>You may not want to fire all the triggers defined in sensor spec. For that, sensor offers <code>when</code> switch on triggers. Basically <code>when</code> switch is way to control when to fire certain trigger depending upon which dependency group is resolved. </p>\n</li>\n<li>\n<p>After sensor fires triggers, it transitions into <code>complete</code> state, increments completion counter and initializes it\'s state back to running and start the process all over again. Any event that is received in-between are stored on the internal queue.</p>\n</li>\n</ol>\n<p>  <strong>Note</strong>: If you don\'t provide dependency groups and <code>circuit</code>, sensor performs an <code>AND</code> operation on event dependencies.</p>\n<h2>Filters</h2>\n<p>There are 3 types of filters that you can apply on event payload:</p>\n<table>\n<thead>\n<tr>\n<th>Type</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Time</strong></td>\n<td>Filters the signal based on time constraints</td>\n</tr>\n<tr>\n<td><strong>EventContext</strong></td>\n<td>Filters metadata that provides circumstantial information about the signal.</td>\n</tr>\n<tr>\n<td><strong>Data</strong></td>\n<td>Describes constraints and filters for payload</td>\n</tr>\n</tbody>\n</table>\n<br/>\n<ul>\n<li>\n<h3>Time Filter</h3>\n<pre><code>filters:\n        time:\n          start: "2016-05-10T15:04:05Z07:00"\n          stop: "2020-01-02T15:04:05Z07:00"\n</code></pre>\n<p><a href="https://github.com/argoproj/argo-events/blob/master/examples/sensors/time-filter-webhook.yaml">Example</a></p>\n</li>\n<li>\n<h3>EventContext Filter</h3>\n<pre><code>filters:\n        context:\n            source:\n                host: amazon.com\n            contentType: application/json\n</code></pre>\n<p><a href="https://github.com/argoproj/argo-events/blob/master/examples/sensors/context-filter-webhook.yaml">Example</a></p>\n</li>\n<li>\n<h3>Data filter</h3>\n<pre><code>filters:\n        data:\n            - path: bucket\n              type: string\n              value: argo-workflow-input\n</code></pre>\n<p><a href="https://github.com/argoproj/argo-events/blob/master/examples/sensors/data-filter-webhook.yaml">Example</a></p>\n</li>\n</ul>\n<h2>How to pass an event payload to a trigger?</h2>\n<p>Payload of an event can be passed to any trigger. The way it works is you define <code>parameters</code> on trigger resource in sensor spec.\nThe <code>parameters</code> define list of  </p>\n<ol>\n<li>\n<p><code>src</code> -</p>\n<ol>\n<li><code>event</code>: the name of the event dependency</li>\n<li><code>path</code>: which is basically a key within event payload to look for</li>\n<li><code>value</code>: which is a default value if sensor can\'t find <code>path</code> in event payload.   </li>\n</ol>\n</li>\n<li>\n<p><code>dest</code>: destination key within trigger spec whose corresponding value needs to be replaced with value from event payload</p>\n</li>\n<li>\n<p>Pass complete event payload to trigger <a href="https://github.com/argoproj/argo-events/blob/master/examples/sensors/webhook-with-complete-payload.yaml">example</a></p>\n</li>\n<li>\n<p>Extract particular value from event payload and pass to trigger <a href="https://github.com/argoproj/argo-events/blob/master/examples/sensors/webhook-with-resource-param.yaml">example</a> </p>\n</li>\n</ol>\n<h2>Examples</h2>\n<p>You can find sensor examples <a href="https://github.com/argoproj/argo-events/tree/master/examples/sensors">here</a></p>',docPath:"argo-events/docs/sensor-guide",proj:"argo-events"}}}});
//# sourceMappingURL=path---docs-argo-events-docs-sensor-guide-html-7e2c20fd64a91de4a5fd.js.map