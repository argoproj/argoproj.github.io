webpackJsonp([0xbefd752a425b],{579:function(e,n){e.exports={pathContext:{docHtml:'<h2>Controllers</h2>\n<ul>\n<li>Sensor and Gateway controller are the components which manage Sensor and Gateway resources. </li>\n<li>Sensor and Gateway are Kubernetes Custom Resources. For more information on K8 CRDs visit, <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/">https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/</a></li>\n</ul>\n<h3>Controller configmap</h3>\n<p>Provide the <code>instance-id</code> and the namespace for controller\ncontroller configmap\ne.g. </p>\n<pre><code class="language-yaml"># The gateway-controller configmap includes configuration information for the gateway-controller\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: gateway-controller-configmap\ndata:\n  config: |\n    instanceID: argo-events  # mandatory\n    namespace: my-custom-namespace # optional\n</code></pre>\n<p><b>Note on <code>instance-id</code></b>: it is used to map a gateway or sensor to a controller.\ne.g. when you create a gateway with label <code>gateways.argoproj.io/gateway-controller-instanceid: argo-events</code>, a\ncontroller with label <code>argo-events</code> will process that gateway. <code>instance-id</code> for controller are managed using <a href="https://raw.githubusercontent.com/argoproj/argo-events/master/hack/k8s/manifests/gateway-controller-configmap.yaml">controller-configmap</a>\nBasically <code>instance-id</code> is used to horizontally scale controllers, so you won\'t end up overwhelming a controller with large\nnumber of gateways or sensors. Also keep in mind that <code>instance-id</code> has nothing to do with namespace where you are\ndeploying controllers and gateways/sensors.</p>\n<h3>Gateway controller</h3>\n<p>Gateway controller watches gateway resource and manages lifecycle of a gateway.</p>\n<pre><code class="language-yaml"># The gateway-controller listens for changes on the gateway CRD and creates gateway\napiVersion: apps/v1beta1\nkind: Deployment\nmetadata:\n  name: gateway-controller\nspec:\n  replicas: 1\n  template:\n    metadata:\n      labels:\n        app: gateway-controller\n    spec:\n      serviceAccountName: argo-events-sa\n      containers:\n      - name: gateway-controller\n        image: argoproj/gateway-controller:latest\n        imagePullPolicy: Always\n        env:\n          - name: GATEWAY_NAMESPACE\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.namespace\n          - name: GATEWAY_CONTROLLER_CONFIG_MAP\n            value: gateway-controller-configmap\n</code></pre>\n<ul>\n<li>\n<p><b>Lifecycle of Gateway in gateway controller</b></p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/gateway-controller-fsm-0eeb59d8da46834348fde45e9085d289-3e1ad.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 98.78542510121456%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAADoklEQVQ4y61UbUyTVxS+b1tEwCGJJlM2db/0h2hG4oKZyVS2mP1wYUbjV0yMWebH0Dg/kpkl6jAmGIkStwWEYIJEnAMF2rct0Ja2lFL6gaUtpfS75W1pbQvtC21JG5bdvfdCCdmMKYsnOTnnOefe5557z70XgHeISO1mIysdCZ6QaN1QbghWItyndbK2bS8FWcm6olxsWSwA1ONTmFBuCNzQWEKw3xCoQTgOIettc1flLAtP9QjZESG5FIFwnDCpX3AYl7h+rzWXHLB9/ZyvLES5kk93sRsf3eA019/irC0sYLEIwHreVMWB0EeAZ0cOgQ0/XlsijvapgN30YvnCnEXFsnPnjlWMyVmeZyTnP+VGhPzjYT63PIPnJsnNMQ/vB5gSFyCcigxUzPolXy3l38i+SQalxzL4jYN/JGgn92Dw+7nvP4LDWhgV97ozA8IObguEXhiytVeOqRqK50IDMEb10dyW6/nTbn4ZwjBthDTVfSDq4W2d8ctg0CF0AJCXTzDz831dr85EBfwvGR915cMnv14pDTs6L3pGnhShBWKU6NtpT88B5FcwrWL8QzQlOhkwt+Bzn/FLjtE+8RdgU04uWF2QtzZTWWPttU9Qkxllg/8ju8tKiC0fF+ctrCLtigfkExCGVi90OokP20Slq0dctFnvjI2N+ucvKEfDlzp6NWMdIq1FaQ7dHvX9dVRrjdiG7dEhTMrtqsNlz0cUp9IhxV3kf3bwNghOz7AXCFPNRs9s3OhNJBjym6+d8apu5Viyd3A8qXcl6g3e1Nlh+3RK76QnQZumFZNK3LzCX/6o2fBd9ZWNEq9w3Qf/2knRA0iAvT4CgwrIVA8JpKA8jUPNjP+5kMFKuxzfMYVDfEcwRMIO6cu03CruRjGqE4J2VefKzlBlM+G3pnTJagetA7BH0w37rRJ8Fo1npoDO3wvaFRToUk2CzkE/aOufwLhN7sb6UuEDf8q9OId0SX5uOLy+vv3hntqn9/c3CepKFpoSw7kZSph9hebJv3eJNc59Ul2g7Lc6f/5imHhUfX4NcoZE9cSKtmwLQaizRqCXZqwrcRrFPGauwGchZZkxtJcEattsdoRqa+yqROO4OmQJ/6RxJLbhZljI2oBd+Hjx3wFRjwBdHfBehPeqYWVb1tljbEG/iW1wRfGr0LviZ5VGHykbdvP0rtnL+MfW2okRz1z2pE0CGxidSOJXMThOtxqpeahzJqDSEuOjmEzvJxg/K65/AHe/7O7MYr/UAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="gateway controller fsm"\n        title=""\n        src="/static/gateway-controller-fsm-0eeb59d8da46834348fde45e9085d289-fb8a0.png"\n        srcset="/static/gateway-controller-fsm-0eeb59d8da46834348fde45e9085d289-1a291.png 148w,\n/static/gateway-controller-fsm-0eeb59d8da46834348fde45e9085d289-2bc4a.png 295w,\n/static/gateway-controller-fsm-0eeb59d8da46834348fde45e9085d289-fb8a0.png 590w,\n/static/gateway-controller-fsm-0eeb59d8da46834348fde45e9085d289-3e1ad.png 741w"\n        sizes="(max-width: 590px) 100vw, 590px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n</li>\n</ul>\n<h3>Sensor controller</h3>\n<p>Sensor controller watches sensor resource and manages lifecycle of a sensor.</p>\n<pre><code class="language-yaml"># The sensor sensor-controller listens for changes on the sensor CRD and creates sensor executor jobs\napiVersion: apps/v1beta1\nkind: Deployment\nmetadata:\n  name: sensor-controller\nspec:\n  replicas: 1\n  template:\n    metadata:\n      labels:\n        app: sensor-controller\n    spec:\n      serviceAccountName: argo-events-sa\n      containers:\n      - name: sensor-controller\n        image: argoproj/sensor-controller:latest\n        imagePullPolicy: Always\n        env:\n          - name: SENSOR_NAMESPACE\n            valueFrom:\n              fieldRef:\n                fieldPath: metadata.namespace\n          - name: SENSOR_CONFIG_MAP\n            value: sensor-controller-configmap\n</code></pre>\n<ul>\n<li>\n<p><b>Lifecycle of a Sensor managed by sensor controller</b></p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/sensor-fsm-5a240eba9c71be9c0b6427c70a4752a5-da739.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 75.06234413965088%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAADVUlEQVQ4y5VTWUwTQRje7pbDgxjjGa8XHzQxxieNiSHRaIJHfEITjFfi8aASrygQNBoVTUg9iBpjPIoKpAgepRRK7y32sMhVui3FstuyttuD0sq2IFBl7IxCMBqjk2z++b5v/mv+WQz7y9K2+XBoSVt4g9pKg2ZbsADiD04Ov3y76s9OnySVyLYWF2JheR3mr6me1Do+Bghom+2RjRprLzBR4QsQfwUAJQIATJ6F+wgjxzBep0GEQ1KFyHF3N8LD/npBaVktVnQ+XwjxmauP5qcMsW4OJtixbRN+qfAwkTZ9oaDo7EHiQF4OsSdvNx4PGAXIOUZqf6naqBDjP7fowLSsRWlTZGKCT63MKTxKjHFvXyPRLn6yPKpWOiJNDfsgDlEvlvE+tSXuayqG2N1RKYxzZEUiQL6A+DOr3jscanZHvco8rrt6XiJgMPF+bSEG/H0ooFJUuiqmUfkGlI1HIDbLRSsjHgXVT8uuQyyrKEiPeFR1A161FGJfd93Rzz5d2Gt/c4gyi5dEWa19wKu6hqrM3bwFBp05pfzZqS/rZ3v/v3ZsXQ8DZmpVooxUW/VDQcMByD99/AhnnKSApWp+TJU3r05wmjUTfvr62wugHQUg7bLo6RyF0ZH1Y+RxMxqAtOxkZoIj5cMB/UFIfIu34D7HaxSM7pCsYJ3yEdZZP9Lb9nzxgFeZOxwygSGvJKeVGSv2xgBopwfHsbLaksl3VD6uJzYeysnadTc/Q9knRe22Wp4j/UlZfibX01AedCueQZzgdNlxztCVDMjWmt3J7E6Gv9/pSdzATB4tJrr4EDnpHE0afZcWkJQGvGM0uZBTUY1Ep/GZ4J/vT/nenWZnk8LQKMANvbr9ElXVLdl76XWrv3kV1HtjX9ItrkEiwH8jHoirM46fKpiR6gaPjgDh4WNnZ9TWNaYnARDQoVEh0//19yHybEM1z7za9b+DlRq9ExV6rtQorHdkpLNEXFm+lHNJtSxVeyIl4SorU6K0uO+l/uFzZhe/00wFS9/ZfDfbmC/brT2x02R7362WnlixvntkGroyWwTD2uk4sDGDoIMeBC/NQwsnMrpiYJbJHgQuLgmsznC0xZ2ooPsBoCMAdLFj5ZYU5+LGQOvHGLAwYC70MVBRwXeHINmwPcaAjgAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="sensor fsm"\n        title=""\n        src="/static/sensor-fsm-5a240eba9c71be9c0b6427c70a4752a5-fb8a0.png"\n        srcset="/static/sensor-fsm-5a240eba9c71be9c0b6427c70a4752a5-1a291.png 148w,\n/static/sensor-fsm-5a240eba9c71be9c0b6427c70a4752a5-2bc4a.png 295w,\n/static/sensor-fsm-5a240eba9c71be9c0b6427c70a4752a5-fb8a0.png 590w,\n/static/sensor-fsm-5a240eba9c71be9c0b6427c70a4752a5-da739.png 802w"\n        sizes="(max-width: 590px) 100vw, 590px"\n      />\n    </span>\n  </span>\n  \n  </a>\n     </p>\n</li>\n</ul>\n <br/>\n \n* <b>Lifecycle of  Sensor within sensor pod</b>\n   \n   ![](sensor-pod-fsm.png)\n   ',docPath:"argo-events/docs/controllers-guide",proj:"argo-events"}}}});
//# sourceMappingURL=path---docs-argo-events-docs-controllers-guide-html-f860d227d81baedfa884.js.map