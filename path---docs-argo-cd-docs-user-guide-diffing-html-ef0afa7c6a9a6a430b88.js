webpackJsonp([0xb821f4fdd339],{575:function(e,i){e.exports={pathContext:{docHtml:'<h1 id="diffing-customization"><a href="#diffing-customization" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Diffing Customization</h1>\n<p>It is possible for an application to be <code>OutOfSync</code> even immediately after a successful Sync operation. Some reasons for this might be:</p>\n<ul>\n<li>There is a bug in the manifest, where it contains extra/unknown fields from the actual K8s spec. These extra fields would get dropped when querying Kubernetes for the live state,\nresulting in an <code>OutOfSync</code> status indicating a missing field was detected.</li>\n<li>The sync was performed (with pruning disabled), and there are resources which need to be deleted.</li>\n<li>A controller or <a href="https://kubernetes.io/docs/reference/access-authn-authz/admission-controllers/#mutatingadmissionwebhook">mutating webhook</a> is altering the object after it was\nsubmitted to Kubernetes in a manner which contradicts Git.</li>\n<li>A Helm chart is using a template function such as <a href="https://github.com/helm/charts/blob/master/stable/redis/templates/secret.yaml#L16"><code>randAlphaNum</code></a>,\nwhich generates different data every time <code>helm template</code> is invoked.</li>\n<li>For Horizontal Pod Autoscaling (HPA) objects, the HPA controller is known to reorder <code>spec.metrics</code>\nin a specific order. See <a href="https://github.com/kubernetes/kubernetes/issues/74099">kubernetes issue #74099</a>.\nTo work around this, you can order <code>spec.replicas</code> in Git in the same order that the controller\nprefers.</li>\n</ul>\n<p>In case it is impossible to fix the upstream issue, Argo CD allows you to optionally ignore differences of problematic resources.\nThe diffing customization can be configured for single or multiple application resources or at a system level.</p>\n<h2 id="application-level-configuration"><a href="#application-level-configuration" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Application Level Configuration</h2>\n<p>Argo CD allows ignoring differences at a specific JSON path. The following sample application is configured to ignore differences in <code>spec.replicas</code> for all deployments:</p>\n<pre><code class="language-yaml">spec:\n  ignoreDifferences:\n  - group: apps\n    kind: Deployment\n    jsonPointers:\n    - /spec/replicas\n</code></pre>\n<p>The above customization could be narrowed to a resource with the specified name and optional namespace:</p>\n<pre><code class="language-yaml">spec:\n  ignoreDifferences:\n  - group: apps\n    kind: Deployment\n    name: guestbook\n    namespace: default\n    jsonPointers:\n    - /spec/replicas\n</code></pre>\n<h2 id="system-level-configuration"><a href="#system-level-configuration" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>System-Level Configuration</h2>\n<p>The comparison of resources with well-known issues can be customized at a system level. Ignored differences can be configured for a specified group and kind\nin <code>resource.customizations</code> key of <code>argocd-cm</code> ConfigMap. Following is an example of a customization which ignores the <code>caBundle</code> field\nof a <code>MutatingWebhookConfiguration</code> webhooks:</p>\n<pre><code class="language-yaml">data:\n  resource.customizations: |\n    admissionregistration.k8s.io/MutatingWebhookConfiguration:\n      ignoreDifferences: |\n        jsonPointers:\n        - /webhooks/0/clientConfig/caBundle\n</code></pre>',docPath:"argo-cd/docs/user-guide/diffing",proj:"argo-cd"}}}});
//# sourceMappingURL=path---docs-argo-cd-docs-user-guide-diffing-html-ef0afa7c6a9a6a430b88.js.map