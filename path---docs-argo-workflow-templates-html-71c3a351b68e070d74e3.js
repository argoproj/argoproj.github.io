webpackJsonp([0x93bb84cc84dd],{495:function(e,a){e.exports={pathContext:{docHtml:'<h1 id="workflow-templates"><a href="#workflow-templates" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Workflow Templates</h1>\n<p><img src="/argo/assets/ga.svg" alt="GA"></p>\n<blockquote>\n<p>v2.4 and after</p>\n</blockquote>\n<h2 id="introduction"><a href="#introduction" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h2>\n<p><code>WorkflowTemplates</code> are definitions of <code>Workflows</code> that live in your cluster. This allows you to create a library of\nfrequently-used templates and reuse them either by submitting them directly (v2.7 and after) or by referencing them from\nyour <code>Workflows</code>.</p>\n<h3 id="workflowtemplate-vs-template"><a href="#workflowtemplate-vs-template" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>WorkflowTemplate</code> vs <code>template</code></h3>\n<p>The terms <code>WorkflowTemplate</code> and <code>template</code> have created an unfortunate naming collision and have created some confusion\nin the past. However, a quick description should clarify each and their differences.</p>\n<ul>\n<li>\n<p>A <code>template</code> (lower-case) is a task within a <code>Workflow</code> or (confusingly) a <code>WorkflowTemplate</code> under the field <code>templates</code>. Whenever you define a\n<code>Workflow</code>, you must define at least one (but usually more than one) <code>template</code> to run. This <code>template</code> can be of type\n<code>container</code>, <code>script</code>, <code>dag</code>, <code>steps</code>, <code>resource</code>, or <code>suspend</code> and can be referenced by an <code>entrypoint</code> or by other\n<code>dag</code>, and <code>step</code> templates.</p>\n<p>Here is an example of a <code>Workflow</code> with two <code>templates</code>:</p>\n<pre><code class="language-yaml">apiVersion: argoproj.io/v1alpha1\nkind: Workflow\nmetadata:\n  generateName: steps-\nspec:\n  entrypoint: hello           # We reference our first "template" here\n\n  templates:\n  - name: hello               # The first "template" in this Workflow, it is referenced by "entrypoint"\n    steps:                    # The type of this "template" is "steps"\n    - - name: hello\n        template: whalesay    # We reference our second "template" here\n        arguments:\n          parameters: [{name: message, value: "hello1"}]\n\n  - name: whalesay             # The second "template" in this Workflow, it is referenced by "hello"\n    inputs:\n      parameters:\n      - name: message\n    container:                # The type of this "template" is "container"\n      image: docker/whalesay\n      command: [cowsay]\n      args: ["{{inputs.parameters.message}}"]```\n</code></pre>\n</li>\n<li>\n<p>A <code>WorkflowTemplate</code> is a definition of a <code>Workflow</code> that lives in your cluster. Since it is a definition of a <code>Workflow</code>\nit also contains <code>templates</code>. These <code>templates</code> can be referenced from within the <code>WorkflowTemplate</code> and from other <code>Workflows</code>\nand <code>WorkflowTemplates</code> on your cluster. To see how, please see <a href="#referencing-other-workflowtemplates">Referencing Other <code>WorkflowTemplates</code></a>.</p>\n</li>\n</ul>\n<h2 id="workflowtemplate-spec"><a href="#workflowtemplate-spec" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>WorkflowTemplate</code> Spec</h2>\n<blockquote>\n<p>v2.7 and after</p>\n</blockquote>\n<p><code>WorkflowTemplates</code> in v2.7 and after are full <code>Workflow</code> definitions. You can take any existing <code>Workflow</code> you may have\nand convert it to a <code>WorkflowTemplate</code> by substituting <code>kind: Workflow</code> to <code>kind: WorkflowTemplate</code>.</p>\n<blockquote>\n<p>v2.4 â€“ 2.6</p>\n</blockquote>\n<p><code>WorkflowTemplates</code> in v2.4 - v2.6 are only partial <code>Workflow</code> definitions and only support the <code>templates</code> and\n<code>arguments</code> field.</p>\n<p>This would <strong>not</strong> be a valid <code>WorkflowTemplate</code> in v2.4 - v2.6 (notice <code>entrypoint</code> field):</p>\n<pre><code class="language-yaml">apiVersion: argoproj.io/v1alpha1\nkind: WorkflowTemplate\nmetadata:\n  name: workflow-template-submittable\nspec:\n  entrypoint: whalesay-template     # Fields other than "arguments" and "templates" not supported in v2.4 - v2.6\n  arguments:\n    parameters:\n      - name: message\n        value: hello world\n  templates:\n    - name: whalesay-template\n      inputs:\n        parameters:\n          - name: message\n      container:\n        image: docker/whalesay\n        command: [cowsay]\n        args: ["{{inputs.parameters.message}}"]\n</code></pre>\n<p>However, this would be a valid <code>WorkflowTemplate</code>:</p>\n<pre><code class="language-yaml">apiVersion: argoproj.io/v1alpha1\nkind: WorkflowTemplate\nmetadata:\n  name: workflow-template-submittable\nspec:\n  arguments:\n    parameters:\n      - name: message\n        value: hello world\n  templates:\n    - name: whalesay-template\n      inputs:\n        parameters:\n          - name: message\n      container:\n        image: docker/whalesay\n        command: [cowsay]\n        args: ["{{inputs.parameters.message}}"]\n</code></pre>\n<h2 id="referencing-other-workflowtemplates"><a href="#referencing-other-workflowtemplates" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Referencing other <code>WorkflowTemplates</code></h2>\n<p>You can reference <code>templates</code> from another <code>WorkflowTemplates</code> (see the <a href="#workflowtemplate-vs-template">difference between the two</a>) using a <code>templateRef</code> field.\nJust as how you reference other <code>templates</code> within the same <code>Workflow</code>, you should do so from a <code>steps</code> or <code>dag</code> template.</p>\n<p>Here is an example from a <code>steps</code> template:</p>\n<pre><code class="language-yaml">apiVersion: argoproj.io/v1alpha1\nkind: Workflow\nmetadata:\n  generateName: workflow-template-hello-world-\nspec:\n  entrypoint: whalesay\n  templates:\n  - name: whalesay\n    steps:                              # You should only reference external "templates" in a "steps" or "dag" "template".\n      - - name: call-whalesay-template\n          templateRef:                  # You can reference a "template" from another "WorkflowTemplate" using this field\n            name: workflow-template-1   # This is the name of the "WorkflowTemplate" CRD that contains the "template" you want\n            template: whalesay-template # This is the name of the "template" you want to reference\n          arguments:                    # You can pass in arguments as normal\n            parameters:\n            - name: message\n              value: "hello world"\n</code></pre>\n<p>You can also do so similarly with a <code>dag</code> template:</p>\n<pre><code class="language-yaml">apiVersion: argoproj.io/v1alpha1\nkind: Workflow\nmetadata:\n  generateName: workflow-template-hello-world-\nspec:\n  entrypoint: whalesay\n  templates:\n  - name: whalesay\n    dag:\n      tasks:\n        - name: call-whalesay-template\n          templateRef:\n            name: workflow-template-1\n            template: whalesay-template\n          arguments:\n            parameters:\n            - name: message\n              value: "hello world"\n</code></pre>\n<p>You should <strong>never</strong> reference another template directly on a <code>template</code> object (outside of a <code>steps</code> or <code>dag</code> template).\nThis includes both using <code>template</code> and <code>templateRef</code>.\nThis behavior is deprecated, no longer supported, and will be removed in a future version.</p>\n<p>Here is an example of a <strong>deprecated</strong> reference that <strong>should not be used</strong>:</p>\n<pre><code class="language-yaml">apiVersion: argoproj.io/v1alpha1\nkind: Workflow\nmetadata:\n  generateName: workflow-template-hello-world-\nspec:\n  entrypoint: whalesay\n  templates:\n  - name: whalesay\n    template:                     # You should NEVER use "template" here. Use it under a "steps" or "dag" template (see above).\n    templateRef:                  # You should NEVER use "templateRef" here. Use it under a "steps" or "dag" template (see above).\n      name: workflow-template-1\n      template: whalesay-template\n    arguments:                    # Arguments here are ignored. Use them under a "steps" or "dag" template (see above).\n      parameters:\n      - name: message\n        value: "hello world"\n</code></pre>\n<p>The reasoning for deprecating this behavior is that a <code>template</code> is a "definition": it defines inputs and things to be\ndone once instantiated. With this deprecated behavior, the same template object is allowed to be an "instantiator":\nto pass in "live" arguments and reference other templates (those other templates may be "definitions" or "instantiators").</p>\n<p>This behavior has been problematic and dangerous. It causes confusion and has design inconsistencies.</p>\n<h2 id="managing-workflowtemplates"><a href="#managing-workflowtemplates" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Managing <code>WorkflowTemplates</code></h2>\n<h3 id="cli"><a href="#cli" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CLI</h3>\n<p>You can create some example templates as follows:</p>\n<pre><code>argo template create https://raw.githubusercontent.com/argoproj/argo/master/examples/workflow-template/templates.yaml\n</code></pre>\n<p>The submit a workflow using one of those templates:</p>\n<pre><code>argo submit https://raw.githubusercontent.com/argoproj/argo/master/examples/workflow-template/hello-world.yam\n</code></pre>\n<h3 id="kubectl"><a href="#kubectl" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>kubectl</code></h3>\n<p>Using <code>kubectl apply -f</code> and <code>kubectl get wftmpl</code></p>\n<h3 id="gitops-via-argo-cd"><a href="#gitops-via-argo-cd" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>GitOps via Argo CD</h3>\n<p><code>WorkflowTemplate</code> resources can be managed with GitOps by using <a href="https://github.com/argoproj/argo-cd">Argo CD</a></p>\n<h3 id="ui"><a href="#ui" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>UI</h3>\n<p><code>WorkflowTemplate</code> resources can also be managed by the UI</p>',docPath:"argo/workflow-templates",proj:"argo"}}}});
//# sourceMappingURL=path---docs-argo-workflow-templates-html-71c3a351b68e070d74e3.js.map