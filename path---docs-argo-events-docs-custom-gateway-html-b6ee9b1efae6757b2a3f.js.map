{"version":3,"sources":["webpack:///path---docs-argo-events-docs-custom-gateway-html-b6ee9b1efae6757b2a3f.js","webpack:///./.cache/json/docs-argo-events-docs-custom-gateway-html.json"],"names":["webpackJsonp","576","module","exports","pathContext","docHtml","docPath","proj"],"mappings":"AAAAA,cAAc,iBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,aAAeC,QAAA,k7eAAwgaC,QAAA,kCAAAC,KAAA","file":"path---docs-argo-events-docs-custom-gateway-html-b6ee9b1efae6757b2a3f.js","sourcesContent":["webpackJsonp([51267894604868],{\n\n/***/ 576:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"pathContext\":{\"docHtml\":\"<h1>Custom Gateway</h1>\\n<p>You can write a gateway in 4 different ways,</p>\\n<ol>\\n<li>Core gateway style.</li>\\n<li>Implement gateway as a gRPC server.</li>\\n<li>Implement gateway as a HTTP server.</li>\\n<li>Write your own implementation completely independent of framework.</li>\\n</ol>\\n<p>Difference between first three options and fourth is that in options 1,2 and 3, framework provides a mechanism\\nto watch configuration updates, start/stop a configuration dynamically. In option 4, its up to\\nuser to watch configuration updates and take actions.</p>\\n<p><b> Below are the environment variables provided to all types of gateways </b></p>\\n<table>\\n<thead>\\n<tr>\\n<th>Field</th>\\n<th>Description</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td>TRANSFORMER_PORT</td>\\n<td>Env var for http server port running within gateway transformer</td>\\n</tr>\\n<tr>\\n<td>ARGO\\n<em>EVENTS</em>\\nNAMESPACE</td>\\n<td>Env var for the namespace of the controller &#x26; services</td>\\n</tr>\\n<tr>\\n<td>GATEWAY\\n<em>PROCESSOR</em>\\nCONFIG_MAP</td>\\n<td>Contains grpc server port for gateway processor server</td>\\n</tr>\\n<tr>\\n<td>GATEWAY_NAME</td>\\n<td>Env var for name of gateway</td>\\n</tr>\\n<tr>\\n<td>GATEWAY\\n<em>CONTROLLER</em>\\nINSTANCE_ID</td>\\n<td>Contains gateway controller instance id</td>\\n</tr>\\n<tr>\\n<td>GATEWAY\\n<em>CONTROLLER</em>\\nNAME</td>\\n<td>Contains name of gateway controller</td>\\n</tr>\\n</tbody>\\n</table>\\n<h2>Core Gateway Style</h2>\\n<p>The most straightforward option. The gateway consists of two components,</p>\\n<ol>\\n<li>\\n<p>Gateway Processor: either generates events internally or listens for external events and then\\npasses those events to gateway-transformer</p>\\n</li>\\n<li>\\n<p>Gateway Transformer: transforms incoming events into cloudevents specification compliant events\\nand dispatches them to watchers. </p>\\n</li>\\n</ol>\\n<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/core-gateway-style-69df2aa6165b138320db2d835e6aa179-a44c1.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 491px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 112.21995926680243%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAAE3ElEQVQ4y6WT228UdRTHp+WFRxVNDMZwUxOB6IsJ8qKVgi+8+2DgwZgIkZj4B1RAJALREOQF5SIVAaWF0oKlu92Wbne33XZvs7P3W+eyMzszu9vtZbvd6+zv628XqEQfIPEkn5wz5/c9J/P7/c6PYf5lJ8+feOTPfdd57tqPG6fi9q9Y2Tfgldw9zoTjCwtr7mqtA2C+Pn6EeaZdHbzc0fKnL554ZXByIMcpfphnTRhxPoBP9GLUbcJd2+23Wpq7k3c6/tPAlVxh/GK5Yw2p0JlQ0NHvNHeG9MAJv+wbn/A/zNlCtmogw8lBjbvBKt4drVpOVtY9XeumvZ7LIssPN/hU29vjwsn1zxSfvuHrpH+5hXbf9JjNrpZPlTbrdWwtAZv9Il5neWysAa/Jq9jqSixvoettbbsmtbKp1aPXnFrHBKTKUCoHRDJ1Qml5RClhpYYJjwCrV4QjkIHdL8NGmQ7piKoNPNE+hszNA7TXIJPMA8msgbhuIPEUqRzBTEjFQ1cSzlCmHVvdKcyGNczRtYTeWNPGaZzMNhHVCBj6N00+D0JFaySzhPiFEvHzJRIQy218c0WaWyW+VJGElQZJ6ITwT9UItEcwXW0yDioYjeQwHi+QsWgeZkpYLYGN8LC7A5ic9cPu4jDucMNim8WEk8WcrNNtLsEUmUerZiw2TyzRHKyJJcL8FVsgv9hDOPnnCDlzx4IrbgGsJCGf5aFmZWjZNPIFFYVFHXpOpjkF83ocnMTj4iyPM7dHcap/lFycCmMoMk+YvlmenDfN4NTN++TcPSs5+8BFZmNRUsiliKzJRFYFwgXdxOtzEknhiaKlia6LJCir5KpbIGcHJ8j3N4fJZUcYDxLLhA5nFazcaKQ0vRnXFg2/YjSias1I6nUjoTeNmFo3pgOKMekTjKhSNRLZJs0bRoTm2XTFCGTqRkBtGJxSbXjFCpiIUi3MN4D8QgGBWApTnApxAVBXgQwdQnqcyNEBzNf/ybXzNNbLlNVHmgXaIyzX8ow7ubTLIxhH03LsDzYUuGCalXs8yaXjdKaO0efUhuVXKaV2zIkVSitfPcqKtW8e08OK1W89qeL7ay8G+Vv7Ub70JvN/LeiIb7QPS2/kU/Yf1OjUl/bh9DaPNfXCs+rK8Tt764JlkSiOFDIOsZm28uVYfzeTYmVRCmsVOZJbSoezi0JANQQuMWrkhj5p5MwHGznTgRZG3tzyBxvZkU8bhdHDddnch6IPFd6BxegYUI6jKY1fYRQ6mAlWhNcWBDcdxby4AoGTXJGZC9tCM7/vCDl/2xGeubbdZ7uyM+a6vj3murHdP/3rzpXE3QNQ7SjNORCx9tFbCdHbsvUyPKfURwbGGr0XrjeuX7pV5aYjEAL6fbqrTsoGykuUFymvPv5+kmMI39eNtOUwshOfQbYcqsT732OyyUWkIzpE+vjnOBm5uWWIASGGkuUDVKb3ojzVjbKjG3XnHixP7sOydQ/qM/tr0tCxemrY05QsEyQ9ZjcE09hquPcdJulN94tBzSMFNacU0qaFgMbybOJMWbm1uyjd+6goDXYV04Ndy9SX5KGuUnrow2Lm3r6aNPITqnSbmgdVYQogUusMr7Zv7MjHPZ3rmU0dLzPvdny++1Dn80xHOTqwC5oDmt/c8JiuVWuis3WGP/8N3XaBlNAoXr4AAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"core gateway style\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/core-gateway-style-69df2aa6165b138320db2d835e6aa179-a44c1.png\\\"\\n        srcset=\\\"/static/core-gateway-style-69df2aa6165b138320db2d835e6aa179-15c5b.png 148w,\\n/static/core-gateway-style-69df2aa6165b138320db2d835e6aa179-59553.png 295w,\\n/static/core-gateway-style-69df2aa6165b138320db2d835e6aa179-a44c1.png 491w\\\"\\n        sizes=\\\"(max-width: 491px) 100vw, 491px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p>User needs to implement following interface.</p>\\n<pre><code class=\\\"language-go\\\">type ConfigExecutor interface {\\n    StartConfig(configContext *ConfigContext) error\\n    StopConfig(configContext *ConfigContext) error\\n}\\n</code></pre>\\n<p>ConfigData contains configuration key/name and value.</p>\\n<pre><code class=\\\"language-go\\\">type ConfigData struct {\\n    // Src contains name of the configuration\\n    Src    string\\n    // Config contains the configuration\\n    Config string\\n    // StopCh is used to send a stop signal to configuration runner/executor\\n    StopCh chan struct{}\\n    // Active tracks configuration state as running or stopped\\n    Active bool\\n}\\n</code></pre>\\n<p>GatewayConfig contains generic configuration for a gateway</p>\\n<pre><code class=\\\"language-go\\\">type GatewayConfig struct {\\n    // Log provides fast and simple logger dedicated to JSON output\\n    Log zerolog.Logger\\n    // Clientset is client for kubernetes API\\n    Clientset kubernetes.Interface\\n    // Name is gateway name\\n    Name string\\n    // Namespace is namespace for the gateway to run inside\\n    Namespace string\\n    // KubeConfig rest client config\\n    KubeConfig *rest.Config \\n}\\n</code></pre>\\n<ul>\\n<li>\\n<p>To send events back to framework for further processing, use</p>\\n<pre><code class=\\\"language-go\\\">gatewayConfig.DispatchEvent(event []byte, src string) error\\n</code></pre>\\n</li>\\n</ul>\\n<p>For detailed implementation, check out <a href=\\\"https://github.com/argoproj/argo-events/tree/eventing/gateways/core\\\">Core Gateways</a></p>\\n<h2>gRPC gateway</h2>\\n<p>A gRPC gateway has 3 components, </p>\\n<ol>\\n<li>\\n<p>Gateway Processor Server - your implementation of gRPC streaming server, either generates events or listens to\\nexternal events and streams them back to gateway-processor-client</p>\\n</li>\\n<li>\\n<p>Gateway Processor Client - gRPC client provided by framework that connects to gateway processor server.</p>\\n</li>\\n<li>\\n<p>Gateway Transformer: transforms incoming events into cloudevents specification compliant events\\nand dispatches them to interested watchers. </p>\\n</li>\\n</ol>\\n<h3>Architecture</h3>\\n<p> \\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/grpc-gateway-e568813052b2543267679778bbc68048-2fbd1.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 78.97503285151117%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACkUlEQVQ4y5VUa3PSUBDNX9fxk+MH/4PWcep0tLUzoowttB1sSzHQ0lIgECBP8oQ8CHkeN7G2ZUA73pmT3bu5e7J777lhQMNfeLjm2zjvnKHFNTFWR3kYWZYV+J/B5A8v8NDkWZQvyjhqH4FT+2uEj+2/wKzyZyv+poQnKzSdCJOpR226mBAEzS8QxZuTwziFYv/OEbTH8KHNYzBN3kO5PkS1JaFCOGQFVJpy8dI0DJiWDdueQdMNOHMbupuBHQUonw8ecppiYa+lCExjEmD3Vsd2c4IPOS5FlDgL0lTGFXuCVuMYN5enqJ8ekK1hqqvglSm+DSxst0Rss2PsXEn41DXAikswdSJ8Q8Hn7/bx4v0XvNyt4GNXg2FJQGIhWRpkbaShWcwtWwMnytjnDLwuneHZ1me82qtii0gvBCJkibA68lEZ2DjmFBwM5jjiXZjzGQJPR++2hUb9BEPuGlFgUdxBV5qhNnaLvENuhsrQQXXs41IMwfTVCD0lBT8NIaga+uR35Ri2//tQUjKu6xc2H5aX0V4llJMjRl9NKId8ysnnTJxkWIQpHNfFgioKogzLKH0kk2xNRvlJ52tyBNGDn8cLHcZxDFniES2UFUXeI/vjP63FgjBcJgjmHjxDge8skaUhRSNiuANiZKGNRGkAGovMaCONl3cf23BTtImF7gWP7s8xRm0Jjilj4UgIXIUs+WSXswFS4QRCfRezm69UhX1PuFZhTlja+Y6dt3vo1AfQpyYURSYokGUZgiDCtkg+7hiR3kFsDaiLaOWOrxAakk2VyZh0VExuFUS+UWguCw3qOIeJxB0iEWtwehUE4xrtgv/3CjPSRBInBdIkXf8p5GviBRH+gNoqwe0dUsuzjYS/APhJuw7R1l8+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"grpc gateway\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/grpc-gateway-e568813052b2543267679778bbc68048-fb8a0.png\\\"\\n        srcset=\\\"/static/grpc-gateway-e568813052b2543267679778bbc68048-1a291.png 148w,\\n/static/grpc-gateway-e568813052b2543267679778bbc68048-2bc4a.png 295w,\\n/static/grpc-gateway-e568813052b2543267679778bbc68048-fb8a0.png 590w,\\n/static/grpc-gateway-e568813052b2543267679778bbc68048-2fbd1.png 761w\\\"\\n        sizes=\\\"(max-width: 590px) 100vw, 590px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p>To implement gateway processor server, you will need to implement</p>\\n<pre><code class=\\\"language-proto\\\">RunGateway(GatewayConfig) returns (stream Event)\\n</code></pre>\\n<p><code>RunGateway</code> method takes a gateway configuration and sends events over a stream.</p>\\n<p>The gateway processor client opens a new connection for each gateway configuration and starts listening to\\nevents on a stream.</p>\\n<p>For detailed implementation, check out <a href=\\\"https://github.com/argoproj/argo-events/tree/eventing/gateways/grpc/calendar\\\">Calendar gRPC gateway</a></p>\\n<ul>\\n<li>\\n<p>To run gRPC gateway, you need to provide <code>rpcPort</code> in gateway spec.</p>\\n</li>\\n<li>\\n<p>To write gateway gRPC server using other languages than go, generate server interfaces using protoc.\\nFollow protobuf tutorials <a href=\\\"\\\"></a><a href=\\\"https://developers.google.com/protocol-buffers/docs/tutorials\\\">https://developers.google.com/protocol-buffers/docs/tutorials</a></p>\\n</li>\\n</ul>\\n<h2>HTTP Gateway</h2>\\n<p>A gRPC gateway has 3 components, </p>\\n<ol>\\n<li>\\n<p>Gateway Processor Server - your implementation of HTTP streaming server, either generates events or listens to\\nexternal events and streams them back to gateway-processor-client. User code must accept POST requests on <code>/start</code> and <code>/stop</code>\\nendpoints.</p>\\n</li>\\n<li>\\n<p>Gateway Processor Client - sends configuration to gateway-processor-server on either <code>/start</code> endpoint for\\na new configuration or <code>/stop</code> endpoint to stop a configuration. Processor client itself has a HTTP server\\nrunning internally listening for events from gateway-processor-server.</p>\\n</li>\\n<li>\\n<p>Gateway Transformer: transforms incoming events into cloudevents specification compliant events\\nand dispatches them to watchers. </p>\\n</li>\\n</ol>\\n<h3>Architecture</h3>\\n<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/http-gateway-aa746c06cb99d62869b31040c71f4a40-7636c.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 58.80149812734082%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAC+ElEQVQoz6WSS2gTQRjHV0XFBz2IehBRQZBaD20PKgoeBL34AEFoEQ8evOnFmyLoXRDEm16kPsAH9VFM1drUBKsxSXebbDa73c1md2Y3+0rSmDaP7iYm87kJSK1XP/gx8zH/+X//gaE4oyLPIgzhJNtmdYukzQXCqEqLt2xIYBSFysz2Zw+v7751/fIA0Ec3CPrCVfUnAKfVW2EGkcloBkI0In4Pc1bTpcR8Bd5/e0eeBUZgmo+CYDsQSn0mU4lJYDWm7hWiQ61C4MhPPH4SFp8PZs35J44LIOfJLw7XIEyrwKJqpydKAYDiDbclmFUiOUs+HskW20TKuy1UboNguSJFnVhHUdRqn00+VFxZuKEtEmDxfHPOqhK1BKSzprQS4XLlNiX7rkoRgJZK/jQEX2YUmJXLoJUBMlajgPjAcGjszoUXj25fYYP3zsi5+EQix8CHH+/aCZ2FTKEJsWwMXnx6Cl/TYaAEo5ETreYv3vDcCGc2orzTFAxvSc77Cc3GjG2yPQCw1mdDJyGnW9ekYhkSyKjz1rwnWg2P1R3vhyA3ZlWjRtGZys6kWjvIYDiQn7fOlcrOEKPB/qRaPUTLtR3UP8XwsC6NYUC0YJBF0J9Abj+fg35chgHJhr4VYqjf3jZy/9JB6n9KiKF9EoN7Z6eLuxwpOmRLsQvRoL1LolEfYp09hwcPbfRlm+v8056GMt4LxcheKER6S+JET+d+FplrkthdncRLXSgladQwZ9VwegVVxFlNzOWyCvN6mI08OOXpH262talqRZxwXSUIRJsa677K/yleZnQ5oZa2QRccUFMGIM7sripnQEFZAH8Q/vT87VZftj6feLy9jT+eL7JvhguJ0YugTRzpGi4WVxr6aYg+5xDma6pLPJwkye98y5ZL/iDT0FNj50OBu2frKHCT6CGrmglatUyw6u9H/iRsyG+WDcUYggytgczoy9BaG7M2iHGEpOnIlo5uURrdRLTPx42ZV6dz8ZdnQJ88Nn63b1Xn7O+EvwHnLnMCSCYGJgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"http gateway\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/http-gateway-aa746c06cb99d62869b31040c71f4a40-fb8a0.png\\\"\\n        srcset=\\\"/static/http-gateway-aa746c06cb99d62869b31040c71f4a40-1a291.png 148w,\\n/static/http-gateway-aa746c06cb99d62869b31040c71f4a40-2bc4a.png 295w,\\n/static/http-gateway-aa746c06cb99d62869b31040c71f4a40-fb8a0.png 590w,\\n/static/http-gateway-aa746c06cb99d62869b31040c71f4a40-7636c.png 801w\\\"\\n        sizes=\\\"(max-width: 590px) 100vw, 590px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p>List of environment variables available to user code</p>\\n<table>\\n<thead>\\n<tr>\\n<th>Field</th>\\n<th>Description</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td>GATEWAY\\n<em>PROCESSOR</em>\\nSERVER\\n<em>HTTP</em>\\nPORT</td>\\n<td>Gateway processor server HTTP server port</td>\\n</tr>\\n<tr>\\n<td>GATEWAY\\n<em>PROCESSOR</em>\\nCLIENT\\n<em>HTTP</em>\\nPORT</td>\\n<td>Gateway processor client HTTP server port</td>\\n</tr>\\n<tr>\\n<td>GATEWAY\\n<em>HTTP</em>\\nCONFIG_START</td>\\n<td>REST endpoint to post new configuration</td>\\n</tr>\\n<tr>\\n<td>GATEWAY\\n<em>HTTP</em>\\nCONFIG_STOP</td>\\n<td>REST endpoint to make configuration to stop</td>\\n</tr>\\n<tr>\\n<td>GATEWAY\\n<em>HTTP</em>\\nCONFIG_EVENT</td>\\n<td>REST endpoint to send events to</td>\\n</tr>\\n</tbody>\\n</table>\\n<p>For detailed implementation, check out <a href=\\\"https://github.com/argoproj/argo-events/tree/eventing/gateways/rest/calendar\\\">Calendar HTTP gateway</a></p>\\n<h2>Framework independent</h2>\\n<p>The fourth option is you provide gateway implementation from scratch: watch the configuration\\nupdates,  start/stop configuration if needed. Only requirement is that events must be\\ndispatched to gateway-transformer using HTTP post request. The port to dispatch the request\\nis made available through environment variable <code>TRANSFORMER_PORT</code>.</p>\\n<p>List of environment variables available to user code</p>\\n<table>\\n<thead>\\n<tr>\\n<th>Field</th>\\n<th>Description</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td>TRANSFORMER_PORT</td>\\n<td>Gateway transformer port to send HTTP POST request to</td>\\n</tr>\\n<tr>\\n<td>ARGO\\n<em>EVENTS</em>\\nNAMESPACE</td>\\n<td>Namespace where gateway is deployed</td>\\n</tr>\\n<tr>\\n<td>GATEWAY\\n<em>PROCESSOR</em>\\nCONFIG_MAP</td>\\n<td>Name of ConfigMap for gateway configuration</td>\\n</tr>\\n<tr>\\n<td>GATEWAY_NAME</td>\\n<td>Gateway name</td>\\n</tr>\\n</tbody>\\n</table>\\n<h3>Gateway Examples</h3>\\n<ul>\\n<li>Example gateway definitions are available at <a href=\\\"https://github.com/argoproj/argo-events/tree/eventing/examples/gateways\\\">here</a></li>\\n</ul>\",\"docPath\":\"argo-events/docs/custom-gateway\",\"proj\":\"argo-events\"}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---docs-argo-events-docs-custom-gateway-html-b6ee9b1efae6757b2a3f.js","module.exports = {\"pathContext\":{\"docHtml\":\"<h1>Custom Gateway</h1>\\n<p>You can write a gateway in 4 different ways,</p>\\n<ol>\\n<li>Core gateway style.</li>\\n<li>Implement gateway as a gRPC server.</li>\\n<li>Implement gateway as a HTTP server.</li>\\n<li>Write your own implementation completely independent of framework.</li>\\n</ol>\\n<p>Difference between first three options and fourth is that in options 1,2 and 3, framework provides a mechanism\\nto watch configuration updates, start/stop a configuration dynamically. In option 4, its up to\\nuser to watch configuration updates and take actions.</p>\\n<p><b> Below are the environment variables provided to all types of gateways </b></p>\\n<table>\\n<thead>\\n<tr>\\n<th>Field</th>\\n<th>Description</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td>TRANSFORMER_PORT</td>\\n<td>Env var for http server port running within gateway transformer</td>\\n</tr>\\n<tr>\\n<td>ARGO\\n<em>EVENTS</em>\\nNAMESPACE</td>\\n<td>Env var for the namespace of the controller &#x26; services</td>\\n</tr>\\n<tr>\\n<td>GATEWAY\\n<em>PROCESSOR</em>\\nCONFIG_MAP</td>\\n<td>Contains grpc server port for gateway processor server</td>\\n</tr>\\n<tr>\\n<td>GATEWAY_NAME</td>\\n<td>Env var for name of gateway</td>\\n</tr>\\n<tr>\\n<td>GATEWAY\\n<em>CONTROLLER</em>\\nINSTANCE_ID</td>\\n<td>Contains gateway controller instance id</td>\\n</tr>\\n<tr>\\n<td>GATEWAY\\n<em>CONTROLLER</em>\\nNAME</td>\\n<td>Contains name of gateway controller</td>\\n</tr>\\n</tbody>\\n</table>\\n<h2>Core Gateway Style</h2>\\n<p>The most straightforward option. The gateway consists of two components,</p>\\n<ol>\\n<li>\\n<p>Gateway Processor: either generates events internally or listens for external events and then\\npasses those events to gateway-transformer</p>\\n</li>\\n<li>\\n<p>Gateway Transformer: transforms incoming events into cloudevents specification compliant events\\nand dispatches them to watchers. </p>\\n</li>\\n</ol>\\n<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/core-gateway-style-69df2aa6165b138320db2d835e6aa179-a44c1.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 491px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 112.21995926680243%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAAE3ElEQVQ4y6WT228UdRTHp+WFRxVNDMZwUxOB6IsJ8qKVgi+8+2DgwZgIkZj4B1RAJALREOQF5SIVAaWF0oKlu92Wbne33XZvs7P3W+eyMzszu9vtZbvd6+zv628XqEQfIPEkn5wz5/c9J/P7/c6PYf5lJ8+feOTPfdd57tqPG6fi9q9Y2Tfgldw9zoTjCwtr7mqtA2C+Pn6EeaZdHbzc0fKnL554ZXByIMcpfphnTRhxPoBP9GLUbcJd2+23Wpq7k3c6/tPAlVxh/GK5Yw2p0JlQ0NHvNHeG9MAJv+wbn/A/zNlCtmogw8lBjbvBKt4drVpOVtY9XeumvZ7LIssPN/hU29vjwsn1zxSfvuHrpH+5hXbf9JjNrpZPlTbrdWwtAZv9Il5neWysAa/Jq9jqSixvoettbbsmtbKp1aPXnFrHBKTKUCoHRDJ1Qml5RClhpYYJjwCrV4QjkIHdL8NGmQ7piKoNPNE+hszNA7TXIJPMA8msgbhuIPEUqRzBTEjFQ1cSzlCmHVvdKcyGNczRtYTeWNPGaZzMNhHVCBj6N00+D0JFaySzhPiFEvHzJRIQy218c0WaWyW+VJGElQZJ6ITwT9UItEcwXW0yDioYjeQwHi+QsWgeZkpYLYGN8LC7A5ic9cPu4jDucMNim8WEk8WcrNNtLsEUmUerZiw2TyzRHKyJJcL8FVsgv9hDOPnnCDlzx4IrbgGsJCGf5aFmZWjZNPIFFYVFHXpOpjkF83ocnMTj4iyPM7dHcap/lFycCmMoMk+YvlmenDfN4NTN++TcPSs5+8BFZmNRUsiliKzJRFYFwgXdxOtzEknhiaKlia6LJCir5KpbIGcHJ8j3N4fJZUcYDxLLhA5nFazcaKQ0vRnXFg2/YjSias1I6nUjoTeNmFo3pgOKMekTjKhSNRLZJs0bRoTm2XTFCGTqRkBtGJxSbXjFCpiIUi3MN4D8QgGBWApTnApxAVBXgQwdQnqcyNEBzNf/ybXzNNbLlNVHmgXaIyzX8ow7ubTLIxhH03LsDzYUuGCalXs8yaXjdKaO0efUhuVXKaV2zIkVSitfPcqKtW8e08OK1W89qeL7ay8G+Vv7Ub70JvN/LeiIb7QPS2/kU/Yf1OjUl/bh9DaPNfXCs+rK8Tt764JlkSiOFDIOsZm28uVYfzeTYmVRCmsVOZJbSoezi0JANQQuMWrkhj5p5MwHGznTgRZG3tzyBxvZkU8bhdHDddnch6IPFd6BxegYUI6jKY1fYRQ6mAlWhNcWBDcdxby4AoGTXJGZC9tCM7/vCDl/2xGeubbdZ7uyM+a6vj3murHdP/3rzpXE3QNQ7SjNORCx9tFbCdHbsvUyPKfURwbGGr0XrjeuX7pV5aYjEAL6fbqrTsoGykuUFymvPv5+kmMI39eNtOUwshOfQbYcqsT732OyyUWkIzpE+vjnOBm5uWWIASGGkuUDVKb3ojzVjbKjG3XnHixP7sOydQ/qM/tr0tCxemrY05QsEyQ9ZjcE09hquPcdJulN94tBzSMFNacU0qaFgMbybOJMWbm1uyjd+6goDXYV04Ndy9SX5KGuUnrow2Lm3r6aNPITqnSbmgdVYQogUusMr7Zv7MjHPZ3rmU0dLzPvdny++1Dn80xHOTqwC5oDmt/c8JiuVWuis3WGP/8N3XaBlNAoXr4AAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"core gateway style\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/core-gateway-style-69df2aa6165b138320db2d835e6aa179-a44c1.png\\\"\\n        srcset=\\\"/static/core-gateway-style-69df2aa6165b138320db2d835e6aa179-15c5b.png 148w,\\n/static/core-gateway-style-69df2aa6165b138320db2d835e6aa179-59553.png 295w,\\n/static/core-gateway-style-69df2aa6165b138320db2d835e6aa179-a44c1.png 491w\\\"\\n        sizes=\\\"(max-width: 491px) 100vw, 491px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p>User needs to implement following interface.</p>\\n<pre><code class=\\\"language-go\\\">type ConfigExecutor interface {\\n    StartConfig(configContext *ConfigContext) error\\n    StopConfig(configContext *ConfigContext) error\\n}\\n</code></pre>\\n<p>ConfigData contains configuration key/name and value.</p>\\n<pre><code class=\\\"language-go\\\">type ConfigData struct {\\n    // Src contains name of the configuration\\n    Src    string\\n    // Config contains the configuration\\n    Config string\\n    // StopCh is used to send a stop signal to configuration runner/executor\\n    StopCh chan struct{}\\n    // Active tracks configuration state as running or stopped\\n    Active bool\\n}\\n</code></pre>\\n<p>GatewayConfig contains generic configuration for a gateway</p>\\n<pre><code class=\\\"language-go\\\">type GatewayConfig struct {\\n    // Log provides fast and simple logger dedicated to JSON output\\n    Log zerolog.Logger\\n    // Clientset is client for kubernetes API\\n    Clientset kubernetes.Interface\\n    // Name is gateway name\\n    Name string\\n    // Namespace is namespace for the gateway to run inside\\n    Namespace string\\n    // KubeConfig rest client config\\n    KubeConfig *rest.Config \\n}\\n</code></pre>\\n<ul>\\n<li>\\n<p>To send events back to framework for further processing, use</p>\\n<pre><code class=\\\"language-go\\\">gatewayConfig.DispatchEvent(event []byte, src string) error\\n</code></pre>\\n</li>\\n</ul>\\n<p>For detailed implementation, check out <a href=\\\"https://github.com/argoproj/argo-events/tree/eventing/gateways/core\\\">Core Gateways</a></p>\\n<h2>gRPC gateway</h2>\\n<p>A gRPC gateway has 3 components, </p>\\n<ol>\\n<li>\\n<p>Gateway Processor Server - your implementation of gRPC streaming server, either generates events or listens to\\nexternal events and streams them back to gateway-processor-client</p>\\n</li>\\n<li>\\n<p>Gateway Processor Client - gRPC client provided by framework that connects to gateway processor server.</p>\\n</li>\\n<li>\\n<p>Gateway Transformer: transforms incoming events into cloudevents specification compliant events\\nand dispatches them to interested watchers. </p>\\n</li>\\n</ol>\\n<h3>Architecture</h3>\\n<p> \\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/grpc-gateway-e568813052b2543267679778bbc68048-2fbd1.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 78.97503285151117%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACkUlEQVQ4y5VUa3PSUBDNX9fxk+MH/4PWcep0tLUzoowttB1sSzHQ0lIgECBP8oQ8CHkeN7G2ZUA73pmT3bu5e7J777lhQMNfeLjm2zjvnKHFNTFWR3kYWZYV+J/B5A8v8NDkWZQvyjhqH4FT+2uEj+2/wKzyZyv+poQnKzSdCJOpR226mBAEzS8QxZuTwziFYv/OEbTH8KHNYzBN3kO5PkS1JaFCOGQFVJpy8dI0DJiWDdueQdMNOHMbupuBHQUonw8ecppiYa+lCExjEmD3Vsd2c4IPOS5FlDgL0lTGFXuCVuMYN5enqJ8ekK1hqqvglSm+DSxst0Rss2PsXEn41DXAikswdSJ8Q8Hn7/bx4v0XvNyt4GNXg2FJQGIhWRpkbaShWcwtWwMnytjnDLwuneHZ1me82qtii0gvBCJkibA68lEZ2DjmFBwM5jjiXZjzGQJPR++2hUb9BEPuGlFgUdxBV5qhNnaLvENuhsrQQXXs41IMwfTVCD0lBT8NIaga+uR35Ri2//tQUjKu6xc2H5aX0V4llJMjRl9NKId8ysnnTJxkWIQpHNfFgioKogzLKH0kk2xNRvlJ52tyBNGDn8cLHcZxDFniES2UFUXeI/vjP63FgjBcJgjmHjxDge8skaUhRSNiuANiZKGNRGkAGovMaCONl3cf23BTtImF7gWP7s8xRm0Jjilj4UgIXIUs+WSXswFS4QRCfRezm69UhX1PuFZhTlja+Y6dt3vo1AfQpyYURSYokGUZgiDCtkg+7hiR3kFsDaiLaOWOrxAakk2VyZh0VExuFUS+UWguCw3qOIeJxB0iEWtwehUE4xrtgv/3CjPSRBInBdIkXf8p5GviBRH+gNoqwe0dUsuzjYS/APhJuw7R1l8+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"grpc gateway\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/grpc-gateway-e568813052b2543267679778bbc68048-fb8a0.png\\\"\\n        srcset=\\\"/static/grpc-gateway-e568813052b2543267679778bbc68048-1a291.png 148w,\\n/static/grpc-gateway-e568813052b2543267679778bbc68048-2bc4a.png 295w,\\n/static/grpc-gateway-e568813052b2543267679778bbc68048-fb8a0.png 590w,\\n/static/grpc-gateway-e568813052b2543267679778bbc68048-2fbd1.png 761w\\\"\\n        sizes=\\\"(max-width: 590px) 100vw, 590px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p>To implement gateway processor server, you will need to implement</p>\\n<pre><code class=\\\"language-proto\\\">RunGateway(GatewayConfig) returns (stream Event)\\n</code></pre>\\n<p><code>RunGateway</code> method takes a gateway configuration and sends events over a stream.</p>\\n<p>The gateway processor client opens a new connection for each gateway configuration and starts listening to\\nevents on a stream.</p>\\n<p>For detailed implementation, check out <a href=\\\"https://github.com/argoproj/argo-events/tree/eventing/gateways/grpc/calendar\\\">Calendar gRPC gateway</a></p>\\n<ul>\\n<li>\\n<p>To run gRPC gateway, you need to provide <code>rpcPort</code> in gateway spec.</p>\\n</li>\\n<li>\\n<p>To write gateway gRPC server using other languages than go, generate server interfaces using protoc.\\nFollow protobuf tutorials <a href=\\\"\\\"></a><a href=\\\"https://developers.google.com/protocol-buffers/docs/tutorials\\\">https://developers.google.com/protocol-buffers/docs/tutorials</a></p>\\n</li>\\n</ul>\\n<h2>HTTP Gateway</h2>\\n<p>A gRPC gateway has 3 components, </p>\\n<ol>\\n<li>\\n<p>Gateway Processor Server - your implementation of HTTP streaming server, either generates events or listens to\\nexternal events and streams them back to gateway-processor-client. User code must accept POST requests on <code>/start</code> and <code>/stop</code>\\nendpoints.</p>\\n</li>\\n<li>\\n<p>Gateway Processor Client - sends configuration to gateway-processor-server on either <code>/start</code> endpoint for\\na new configuration or <code>/stop</code> endpoint to stop a configuration. Processor client itself has a HTTP server\\nrunning internally listening for events from gateway-processor-server.</p>\\n</li>\\n<li>\\n<p>Gateway Transformer: transforms incoming events into cloudevents specification compliant events\\nand dispatches them to watchers. </p>\\n</li>\\n</ol>\\n<h3>Architecture</h3>\\n<p>\\n  <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/static/http-gateway-aa746c06cb99d62869b31040c71f4a40-7636c.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n  \\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 590px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 58.80149812734082%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAAC+ElEQVQoz6WSS2gTQRjHV0XFBz2IehBRQZBaD20PKgoeBL34AEFoEQ8evOnFmyLoXRDEm16kPsAH9VFM1drUBKsxSXebbDa73c1md2Y3+0rSmDaP7iYm87kJSK1XP/gx8zH/+X//gaE4oyLPIgzhJNtmdYukzQXCqEqLt2xIYBSFysz2Zw+v7751/fIA0Ec3CPrCVfUnAKfVW2EGkcloBkI0In4Pc1bTpcR8Bd5/e0eeBUZgmo+CYDsQSn0mU4lJYDWm7hWiQ61C4MhPPH4SFp8PZs35J44LIOfJLw7XIEyrwKJqpydKAYDiDbclmFUiOUs+HskW20TKuy1UboNguSJFnVhHUdRqn00+VFxZuKEtEmDxfHPOqhK1BKSzprQS4XLlNiX7rkoRgJZK/jQEX2YUmJXLoJUBMlajgPjAcGjszoUXj25fYYP3zsi5+EQix8CHH+/aCZ2FTKEJsWwMXnx6Cl/TYaAEo5ETreYv3vDcCGc2orzTFAxvSc77Cc3GjG2yPQCw1mdDJyGnW9ekYhkSyKjz1rwnWg2P1R3vhyA3ZlWjRtGZys6kWjvIYDiQn7fOlcrOEKPB/qRaPUTLtR3UP8XwsC6NYUC0YJBF0J9Abj+fg35chgHJhr4VYqjf3jZy/9JB6n9KiKF9EoN7Z6eLuxwpOmRLsQvRoL1LolEfYp09hwcPbfRlm+v8056GMt4LxcheKER6S+JET+d+FplrkthdncRLXSgladQwZ9VwegVVxFlNzOWyCvN6mI08OOXpH262talqRZxwXSUIRJsa677K/yleZnQ5oZa2QRccUFMGIM7sripnQEFZAH8Q/vT87VZftj6feLy9jT+eL7JvhguJ0YugTRzpGi4WVxr6aYg+5xDma6pLPJwkye98y5ZL/iDT0FNj50OBu2frKHCT6CGrmglatUyw6u9H/iRsyG+WDcUYggytgczoy9BaG7M2iHGEpOnIlo5uURrdRLTPx42ZV6dz8ZdnQJ88Nn63b1Xn7O+EvwHnLnMCSCYGJgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"http gateway\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/http-gateway-aa746c06cb99d62869b31040c71f4a40-fb8a0.png\\\"\\n        srcset=\\\"/static/http-gateway-aa746c06cb99d62869b31040c71f4a40-1a291.png 148w,\\n/static/http-gateway-aa746c06cb99d62869b31040c71f4a40-2bc4a.png 295w,\\n/static/http-gateway-aa746c06cb99d62869b31040c71f4a40-fb8a0.png 590w,\\n/static/http-gateway-aa746c06cb99d62869b31040c71f4a40-7636c.png 801w\\\"\\n        sizes=\\\"(max-width: 590px) 100vw, 590px\\\"\\n      />\\n    </span>\\n  </span>\\n  \\n  </a>\\n    </p>\\n<p>List of environment variables available to user code</p>\\n<table>\\n<thead>\\n<tr>\\n<th>Field</th>\\n<th>Description</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td>GATEWAY\\n<em>PROCESSOR</em>\\nSERVER\\n<em>HTTP</em>\\nPORT</td>\\n<td>Gateway processor server HTTP server port</td>\\n</tr>\\n<tr>\\n<td>GATEWAY\\n<em>PROCESSOR</em>\\nCLIENT\\n<em>HTTP</em>\\nPORT</td>\\n<td>Gateway processor client HTTP server port</td>\\n</tr>\\n<tr>\\n<td>GATEWAY\\n<em>HTTP</em>\\nCONFIG_START</td>\\n<td>REST endpoint to post new configuration</td>\\n</tr>\\n<tr>\\n<td>GATEWAY\\n<em>HTTP</em>\\nCONFIG_STOP</td>\\n<td>REST endpoint to make configuration to stop</td>\\n</tr>\\n<tr>\\n<td>GATEWAY\\n<em>HTTP</em>\\nCONFIG_EVENT</td>\\n<td>REST endpoint to send events to</td>\\n</tr>\\n</tbody>\\n</table>\\n<p>For detailed implementation, check out <a href=\\\"https://github.com/argoproj/argo-events/tree/eventing/gateways/rest/calendar\\\">Calendar HTTP gateway</a></p>\\n<h2>Framework independent</h2>\\n<p>The fourth option is you provide gateway implementation from scratch: watch the configuration\\nupdates,  start/stop configuration if needed. Only requirement is that events must be\\ndispatched to gateway-transformer using HTTP post request. The port to dispatch the request\\nis made available through environment variable <code>TRANSFORMER_PORT</code>.</p>\\n<p>List of environment variables available to user code</p>\\n<table>\\n<thead>\\n<tr>\\n<th>Field</th>\\n<th>Description</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td>TRANSFORMER_PORT</td>\\n<td>Gateway transformer port to send HTTP POST request to</td>\\n</tr>\\n<tr>\\n<td>ARGO\\n<em>EVENTS</em>\\nNAMESPACE</td>\\n<td>Namespace where gateway is deployed</td>\\n</tr>\\n<tr>\\n<td>GATEWAY\\n<em>PROCESSOR</em>\\nCONFIG_MAP</td>\\n<td>Name of ConfigMap for gateway configuration</td>\\n</tr>\\n<tr>\\n<td>GATEWAY_NAME</td>\\n<td>Gateway name</td>\\n</tr>\\n</tbody>\\n</table>\\n<h3>Gateway Examples</h3>\\n<ul>\\n<li>Example gateway definitions are available at <a href=\\\"https://github.com/argoproj/argo-events/tree/eventing/examples/gateways\\\">here</a></li>\\n</ul>\",\"docPath\":\"argo-events/docs/custom-gateway\",\"proj\":\"argo-events\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/docs-argo-events-docs-custom-gateway-html.json\n// module id = 576\n// module chunks = 51267894604868"],"sourceRoot":""}